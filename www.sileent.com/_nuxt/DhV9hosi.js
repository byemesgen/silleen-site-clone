import{e as P,ab as T,ac as L,y as q,f as w,p as B,c as k,n as A,o as x,R as _,ad as V,U as p,ae as R,af as H,S as O,ag as F,ah as C,b,w as E,C as D,h as v,$ as W,a0 as j,ai as G}from"#entry";import{u as U,P as J,M as K,a as Q}from"./BzSiG74y.js";import{u as X,a as Y}from"./DWDb_XUr.js";import{m as Z}from"./DJ65BbbF.js";function $(t){return R()?(H(t),!0):!1}const ee=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const te=t=>t!=null;function ne(t){return Array.isArray(t)?t:[t]}const N=ee?window:void 0;function S(t){var i;const n=p(t);return(i=n?.$el)!=null?i:n}function ie(){const t=O(!1),i=F();return i&&B(()=>{t.value=!0},i),t}function I(t){const i=ie();return w(()=>(i.value,!!t()))}function oe(t,i,n={}){const{window:o=N,...d}=n;let r;const c=I(()=>o&&"MutationObserver"in o),s=()=>{r&&(r.disconnect(),r=void 0)},u=w(()=>{const e=p(t),a=ne(e).map(S).filter(te);return new Set(a)}),f=A(()=>u.value,e=>{s(),c.value&&e.size&&(r=new MutationObserver(i),e.forEach(a=>r.observe(a,d)))},{immediate:!0,flush:"post"}),m=()=>r?.takeRecords(),l=()=>{f(),s()};return $(l),{isSupported:c,stop:l,takeRecords:m}}function ae(t,i,n={}){const{window:o=N,...d}=n;let r;const c=I(()=>o&&"ResizeObserver"in o),s=()=>{r&&(r.disconnect(),r=void 0)},u=w(()=>{const l=p(t);return Array.isArray(l)?l.map(e=>S(e)):[S(l)]}),f=A(u,l=>{if(s(),c.value&&o){r=new ResizeObserver(i);for(const e of l)e&&r.observe(e,d)}},{immediate:!0,flush:"post"}),m=()=>{s(),f()};return $(m),{isSupported:c,stop:m}}function z(t){const{from:i,to:n,duration:o,callback:d,easing:r=u=>u*(2-u)}=t;let c;function s(u){c||(c=u);const f=Math.min(1,(u-c)/o),m=r(f),l=i+(n-i)*m;d(l),f<1&&requestAnimationFrame(s)}requestAnimationFrame(s)}function re(t){return t*(2-t)}const se=P({__name:"AutoSize",props:{width:{type:Boolean,default:!0},height:{type:Boolean,default:!0},duration:{default:150},easing:{type:Function,default:re}},setup(t){const i=T("el"),n=L({width:0,height:0}),o=L({width:0,height:0}),d=q(void 0),r=w(()=>{if(n)switch(!0){case(t.width&&t.height):return{width:`${o.width}px`,height:`${o.height}px`};case t.width:return{width:`${o.width}px`};case t.height:return{height:`${o.height}px`};default:return}else return});function c(e){const a=parseFloat(e)??0;return isNaN(a)?0:a}const s=w(()=>{if(i.value){const e=getComputedStyle(i.value,null),a=c(e.getPropertyValue("padding-top")),h=c(e.getPropertyValue("padding-left")),g=c(e.getPropertyValue("padding-right")),y=c(e.getPropertyValue("padding-bottom"));return{x:g+h,y:a+y}}else return{x:0,y:0}}),u=w(()=>{var e;return Array.from(((e=i.value)==null?void 0:e.childNodes)??[]).find(a=>a instanceof HTMLElement)}),f=w(()=>{var e,a;let h={};return t.width&&(h={...h,width:"var(--auto-size-width)","--auto-size-width":(e=r.value)==null?void 0:e.width}),t.height&&(h={...h,height:"var(--auto-size-height)","--auto-size-height":(a=r.value)==null?void 0:a.height}),h});oe(i,e=>{const a=e.flatMap(g=>[...g.addedNodes]).find(g=>g instanceof HTMLElement),h=e.flatMap(g=>[...g.addedNodes]).find(g=>g instanceof Comment);a&&(d.value=a),h&&!u.value&&(d.value=void 0,n.width=0,n.height=0),u.value||(d.value=void 0,n.width=0,n.height=0)},{childList:!0}),ae(d,e=>{const a=e[0].borderBoxSize[0];n.width=a.inlineSize+s.value.x,n.height=a.blockSize+s.value.y}),B(()=>{if(i.value){const e=i.value.querySelectorAll("*"),a=Array.from(e).find(h=>h instanceof HTMLElement);a&&a instanceof HTMLElement?(d.value=a,n.width=a.offsetWidth+s.value.x,n.height=a.offsetHeight+s.value.y):(n.width=0,n.height=0),m(n.width),l(n.height)}});function m(e){isNaN(e)||(o.width=e)}function l(e){isNaN(e)||(o.height=e)}return A(()=>n.width,e=>{e!==o.width&&z({from:o.width,to:e,duration:t.duration,easing:t.easing,callback:m})}),A(()=>n.height,e=>{e!==o.width&&z({from:o.height,to:e,duration:t.duration,easing:t.easing,callback:l})}),(e,a)=>(x(),k("div",{ref:"el",class:"auto-size",style:V(f.value)},[_(e.$slots,"default")],4))}}),M=Z();function ce(){return{on:M.on,off:M.off,emit:M.emit}}function ue(t){const{viewId:i,instanceId:n}=t,o=ce();function d(){o.emit("beforeEnter",{id:p(n),viewId:i})}function r(){o.emit("enter",{id:p(n),viewId:i})}async function c(){o.emit("afterEnter",{id:p(n),viewId:i})}function s(){o.emit("beforeLeave",{id:p(n),viewId:i})}function u(){o.emit("leave",{id:p(n),viewId:i})}function f(){o.emit("afterLeave",{id:p(n),viewId:i})}return{onBeforeEnter:d,onEnter:r,onAfterEnter:c,onBeforeLeave:s,onLeave:u,onAfterLeave:f}}const de=["data-active","data-id"],ge={__name:"MagicAccordionContent",props:{asChild:{type:Boolean,required:!1},transition:{type:String,required:!1},animation:{type:Object,required:!1}},setup(t){const i=X({prefix:"MagicAccordion",source:"MagicAccordionContent"}),n=C(Q,void 0),o=C(K,void 0);i.assert(n,{message:"MagicAccordionContent must be nested inside MagicAccordionProvider",errorCode:"missing_instance_id"}),i.assert(o,{message:"MagicAccordionContent must be nested inside MagicAccordionView",errorCode:"missing_view_id"});const{initializeState:d}=U(n),r=d(),{getView:c}=Y(n),s=c(o),u=w(()=>t.transition??r.options.transition),f=w(()=>G(t.animation,r.options.animation)),{onBeforeEnter:m,onEnter:l,onAfterEnter:e,onBeforeLeave:a,onLeave:h,onAfterLeave:g}=ue({instanceId:n,viewId:o});return(y,le)=>(x(),k("div",{class:"magic-accordion-content","data-active":v(s)?.active,"data-id":`${v(o)}-content`,style:V({"--ma-duration":`${v(r).options.animation?.duration}ms`})},[b(v(se),{width:!1,duration:f.value.duration,easing:f.value.easing},{default:E(()=>[b(D,{name:u.value,onBeforeEnter:v(m),onEnter:v(l),onAfterEnter:v(e),onBeforeLeave:v(a),onLeave:v(h),onAfterLeave:v(g)},{default:E(()=>[W(b(v(J),{"as-child":t.asChild},{default:E(()=>[_(y.$slots,"default",{viewActive:v(s)?.active})]),_:3},8,["as-child"]),[[j,v(s)?.active]])]),_:3},8,["name","onBeforeEnter","onEnter","onAfterEnter","onBeforeLeave","onLeave","onAfterLeave"])]),_:3},8,["duration","easing"])],12,de))}};export{ge as default};
